# 《代码大全2》第二十六章 “代码调整技术” 读书笔记
以牺牲程序内部结构的某些特性来换取更高的性能
## 26.1逻辑
### 在知道答案后停止判断
* 多个条件判断的时候，其中一个条件已经能够决定最重的个结果，不必计算后续条件，
* 循环或者子程序已经得到了想要的结果的时候无需继续运行后续计算
### 按照出现频率来调整判断顺序
安排判断的顺序,让运行最快和判断结果最有可能为真的判断首先被执行
### 相似逻辑结构之间的性能比较
通过测量结果选择更高效的方法
### 用查询表替代复杂表达式
### 使用惰性求值

## 26.2循环
### 将判断外提
### 合并多个循环
### 展开
### 尽可能减少在循环内部做的工作
### 哨兵值
找到需要的结果后直接退出循环
### 把最忙的循环放在最内层
### 削减强度
削减强度意味着用多次轻量级运算来代替一次代价高昂的运算

## 26.3数据变换
### 使用整型数而不是浮点数
### 数组维度尽可能少
### 尽可能减少数组引用
如果需要多次访问同一个值，用临时变量接一下
### 使用辅助索引
### 使用缓存机制
这种方式用空间换时间，而且会增加缓存内容维护的工作过量，恰当地使用可以避免重复的读写和计算从而给程序提升效率

## 26.4表达式
### 利用代数恒等式
如sqrt(x) < sqrt(y) 可以用更高效的 x < y 代替
### 削弱运算强度
### 编译期初始化
编码时计算结果并存到常量中
### 小心系统函数

## 26.5子程序
### 将子程序重写为内联

## 26.6用低级语言重写代码
略
## 26.7变得越多,事情反而越没变
代码调整无可避免地为性能改善的良好愿望而付出复杂性、可读性、简单性、
可维护性方面的代价。由于每一次调整后需要对性能进行重新评估,代码调整还
引入了巨额的管理维护开销。

``` 读后感
本章介绍的做法与前面章节的标准相反，甚至给出了一些作者不推荐的结果。
性能优化有的时候会牺牲代码的可读性，破坏一些封装，
不应该在在不必要和没有证明确确实有效之前使用，
事实上至今为止我还没有接触到需要牺牲可读性来换性能的工作，
遇到的性能问题多数出在不良的设计。
作者再次强调测量效率比经验更为重要
``` 
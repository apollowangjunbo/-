# 《代码大全2》第十九章 “一般控制问题” 读书笔记

## 19.1布尔表达式
### 用true和 false做布尔判断
(而不要用0和1等数值,易混淆，可读性差)
* 隐式地比较布尔值与true和 false（要while(a>b),不要while((a>b)==true)）
### 简化复杂的表达式
* 拆分复杂的判断并引入新的布尔变量
* 把复杂的表达式做成布尔函数（即使只调用一次，把复杂的判断逻辑放在命名良好函数里也能大大提高代码的可读性）
* 用决策表代替复杂的条件（表驱动法）
### 编写肯定形式的布尔表达式
多重否定增加阅读难度，可以使用狄摩根定理简化否定的布尔判断(!A||!B)=!(A&B)
### 用括号使布尔表达式更清晰
### 理解布尔表达式是如何求值的
``` 感想
感想：
      C++采用短路的方式计算布尔表达式的值，所以平时才能方便的这样写：  
      if((pContainer != nullptr) & (pContainer->hasChildren)) {}
      在第一个条件为是的时候才会执行第二个语句，如果没有这个机制，执行第二个语句的时候可能因为访问空指针崩溃 
```  
### 按照数轴的顺序编写数值表达式
从左到右，从小大大。"min < x & x < max" 比 "x > min & max > x"更容易理解。
### 与0比较的指导原则
编程语言把0用做很多目的。它是一个数值,是字符串中的零终止符,是空
指针的取值,是枚举的第一个元素的取值,是逻辑表达式中的 false既然它有
如此多的用途,因此你写的代码中就应该彰显0的特定用法。
* 隐式地比较逻辑变量
* 把数和0相比较(表达变量数据类型)
* 把指针与NULL相比较（C++11推荐使用nullptr）
``` 感想
感想：
      比较的过程也要考虑数据类型，不能偷懒都按数字去比较，尽可能给读代码的人更多确定的信息
```
### 布尔表达式的常见问题
* C家族语言中,应该把常量放在比较的左端（通过编译器报错来避免误把“==”写成“=”）

``` 感想
感想：
      布尔判断是开发者最常用的控制方式，事实上工作中遇到的相当多的bug是由布尔判断出错造成的。优化判断语句的可读性对于代码的阅读和维护都有很大的帮助。
```
## 19.2复合语句(语句块)
“复合语句”或“语句块”指的是一组语句,该组语句被视为一条单一的语
句,用于控制程序流。
* 把括号对一起写出（先写好一堆括号再填充内容，避免落下）
* 用括号来把条件表达清楚（if后面执行语句在括号里，哪怕只有一句）
## 19.3空语句
C++中一个“；”就是一个空语句，可以用来占位，如while后必须有一条语句，可以用“；”。
* 小心使用空语句
* 为空语句创建一个 DoNothing()预处理宏或者内联函数(说明确实什么都不想做)
* 考虑如果换用一个非空的循环体,是否会让代码更清晰
``` 感想
感想：
      我能想到的场景：读文本文件，一开始希望先跳过前面的几行，通过循环执行n次的read使文件指针指向希望行数。
```
## 19.4驯服危险的深层嵌套
软件首要技术使，命管理复杂度，很少有人能够理解超过3层的if嵌套
避免深层嵌套的方法：
* 通过重复检测条件中的某一部分来简化嵌套的if语句
* 用 break块来简化嵌套if
* 把嵌套if转换成一组if-then-else语句
* 把嵌套if转换成case语句
* 把深层嵌套的代码抽取出来放进单独的子程序
* 使用一种更面向对象的方法（利用继承和多态）
* 重新设计深层嵌套的代码
* 用状态变量重写代码
* 用防卫子句来退出子程序,从而使代码的主要路径更为清晰
* 使用异常
``` 感想
感想：
      深层的嵌套写起来方便，读起来难受，代码读的次数要比写的次数多，所以写的时候要更多的考虑读者的感受。另一方面，深层的嵌套会影响自动化的代码覆盖率，比较内层的条件判断很难被覆盖。
```  
## 19.5编程基础:结构化编程
一个应用程序应该只采用一些单入单出的控制结构，不会做不可预知的随便跳转
### 结构化编程的三个组成部分
1. 顺序
2. 选择
3. 迭代
结构化编程的中心论点是,任何一种控制流都可以由顺序、选择和迭代这三种结构生成
## 19.6控制结构与复杂度
控制流是影响复杂度的最大的因素之一，永远也不可能有能力应对如此巨大的复杂度,因此只有尽可能地采取措施来降低复杂度

``` 读后感
读后感：
      非常喜欢本章的一句话：“程序员有时候会倾向于使用那些更方便的语
言结构,但是编程这一领域却似乎更多地是在对我们能用编程语言做些什么加以
限制的过程中取得发展的。”。对于我而言，读代码的时间一般都比写代码的时间还要长，改bug、扩展功能都需要对原油代码充分的理解。结构化编程的思想将结构限制在了顺序、选择和迭代三种，使得复杂度得以被控制，阅读代码比goto满天飞的时代要轻松很多，减少了花样写法的偶然复杂度，有更多的精力去应对业务逻辑带来的实际复杂度。
```  
